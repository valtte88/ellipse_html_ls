<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>


<script>

    // create the svg area
    var svg = d3.select("#my_dataviz")
      .append("svg")
        .attr("width", 440)
        .attr("height", 440)
      .append("g")
        .attr("transform", "translate(220,220)")
    
    // create a matrix
    var matrix = [
      [40, 0, 0, 0,0,0,0,0,0],
      [0, 39, 0, 0,0,0,0,0,0],
      [0, 0, 38, 0,0,0,0,0,0],
      [0, 0, 0, 31,0,0,0,0,0],
      [0,0,0,0,20,0,0,0,0],
      [0,0,0,0,0,16,0,0,0],
      [0,0,0,0,0,0,10,0,0],
      [0,0,0,0,0,0,0,5,0],
      [0,0,0,0,0,0,0,0,1]
    ];
    
    // 4 groups, so create a vector of 4 colors
    var colors = [ "red", "lightblue", "darkblue", "green", "lightgreen", "darkred", "yellow", "purple", "azul"]
    
    // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon
    var res = d3.chord()
        .padAngle(0.05)
        .sortSubgroups(d3.descending)
        (matrix)
    
    // add the groups on the outer part of the circle
    svg
      .datum(res)
      .append("g")
      .selectAll("g")
      .data(function(d) { return d.groups; })
      .enter()
      .append("g")
      .append("path")
        .style("fill", function(d,i){ return colors[i] })
        .style("stroke", "black")
        .attr("d", d3.arc()
          .innerRadius(200)
          .outerRadius(210)
        )
    
    // Add the links between groups
    svg
      .datum(res)
      .append("g")
      .selectAll("path")
      .data(function(d) { return d; })
      .enter()
      .append("path")
        .attr("d", d3.ribbon()
          .radius(200)
        )
        .style("fill", function(d){ return(colors[d.source.index]) }) // colors depend on the source group. Change to target otherwise.
        .style("stroke", "black");
    
    </script>

<script>

    // create the svg area
    var svg = d3.select("#my_dataviz")
      .append("svg")
        .attr("width", 440)
        .attr("height", 440)
      .append("g")
        .attr("transform", "translate(220,220)")
    
    // create a matrix
    var matrix = [
      [35, 0, 0, 0,0,0,0,0,0],
      [4, 38, 0, 7,0,0,0,0,0],
      [0, 1, 38, 2,0,0,0,0,0],
      [0, 0, 0, 21.5,0,0,0,0,0],
      [0,0,0,0.5,20,1,0,0,0],
      [1,0,0,0,0,15,0,0,0],
      [0,0,0,0,0,0,8,0,0],
      [0,0,0,0,0,0,2,5,0],
      [0,0,0,0,0,0,0,0,1]
    ];
    
    // 4 groups, so create a vector of 4 colors
    var colors = [ "red", "lightblue", "darkblue", "green", "lightgreen", "darkred", "yellow", "purple", "azul"]
    
    // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon
    var res = d3.chord()
        .padAngle(0.05)
        .sortSubgroups(d3.descending)
        (matrix)
    
    // add the groups on the outer part of the circle
    svg
      .datum(res)
      .append("g")
      .selectAll("g")
      .data(function(d) { return d.groups; })
      .enter()
      .append("g")
      .append("path")
        .style("fill", function(d,i){ return colors[i] })
        .style("stroke", "black")
        .attr("d", d3.arc()
          .innerRadius(200)
          .outerRadius(210)
        )
    
    // Add the links between groups
    svg
      .datum(res)
      .append("g")
      .selectAll("path")
      .data(function(d) { return d; })
      .enter()
      .append("path")
        .attr("d", d3.ribbon()
          .radius(200)
        )
        .style("fill", function(d){ return(colors[d.source.index]) }) // colors depend on the source group. Change to target otherwise.
        .style("stroke", "black");
    
    </script>
    <script>

        // create the svg area
        var svg = d3.select("#my_dataviz")
          .append("svg")
            .attr("width", 440)
            .attr("height", 440)
          .append("g")
            .attr("transform", "translate(220,220)")
        
        // create a matrix
        var matrix = [
          [35, 0, 0, 0,0,0,0,0,0],
          [0, 49, 0, 0,0,0,0,0,0],
          [0, 0, 41, 0,0,0,0,0,0],
          [0, 0, 0, 21.5,0,0,0,0,0],
          [0,0,0,0,21.5,0,0,0,0],
          [0,0,0,0,0,16,0,0,0],
          [0,0,0,0,0,0,8,0,0],
          [0,0,0,0,0,0,0,7,0],
          [0,0,0,0,0,0,0,0,1]
        ];
        
        // 4 groups, so create a vector of 4 colors
        var colors = [ "red", "lightblue", "darkblue", "green", "lightgreen", "darkred", "yellow", "purple", "azul"]
        
        // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon
        var res = d3.chord()
            .padAngle(0.05)
            .sortSubgroups(d3.descending)
            (matrix)
        
        // add the groups on the outer part of the circle
        svg
          .datum(res)
          .append("g")
          .selectAll("g")
          .data(function(d) { return d.groups; })
          .enter()
          .append("g")
          .append("path")
            .style("fill", function(d,i){ return colors[i] })
            .style("stroke", "black")
            .attr("d", d3.arc()
              .innerRadius(200)
              .outerRadius(210)
            )
        
        // Add the links between groups
        svg
          .datum(res)
          .append("g")
          .selectAll("path")
          .data(function(d) { return d; })
          .enter()
          .append("path")
            .attr("d", d3.ribbon()
              .radius(200)
            )
            .style("fill", function(d){ return(colors[d.source.index]) }) // colors depend on the source group. Change to target otherwise.
            .style("stroke", "black");
        
        </script>
